<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet">
  <style>
    #map { width: 100%; height: 100vh; }
    .locker-marker {
      font-size: 24px;
      text-shadow: 0 0 3px white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    // Initialize map
    mapboxgl.accessToken = 'YOUR_MAPBOX_TOKEN';
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [2.1734, 41.3851], // Barcelona center
      zoom: 12
    });

    // Add locker markers
    const lockers = [
      {id: 1, name: "BCN Airport", lng: 2.0833, lat: 41.2974},
      {id: 2, name: "Barcelona Sants", lng: 2.1406, lat: 41.3796},
      {id: 3, name: "EstaciÃ³ de FranÃ§a", lng: 2.1836, lat: 41.3850},
      {id: 4, name: "Passeig de GrÃ cia", lng: 2.1657, lat: 41.3919},
      {id: 5, name: "Clot-AragÃ³", lng: 2.1864, lat: 41.4106},
      {id: 6, name: "Barcelona Nord", lng: 2.1814, lat: 41.3936}
    ];

    lockers.forEach(l => {
      const el = document.createElement('div');
      el.className = 'locker-marker';
      el.innerHTML = 'ðŸ”’';
      
      new mapboxgl.Marker(el)
        .setLngLat([l.lng, l.lat])
        .setPopup(new mapboxgl.Popup().setHTML(`<b>${l.name}</b><br>Locker ${l.id}`))
        .addTo(map);
    });

    // Route drawing function
    function drawRoute(routeData) {
      const data = JSON.parse(routeData);
      if (map.getSource('route')) {
        map.removeLayer('route');
        map.removeSource('route');
      }
      
      map.addLayer({
        id: 'route',
        type: 'line',
        source: {
          type: 'geojson',
          data: data.routes[0].geometry
        },
        paint: {
          'line-color': '#3b82f6',
          'line-width': 4
        }
      });
      
      const bounds = new mapboxgl.LngLatBounds();
      data.routes[0].geometry.coordinates.forEach(coord => {
        bounds.extend(coord);
      });
      map.fitBounds(bounds, {padding: 50});
    }
  </script>
</body>
</html>